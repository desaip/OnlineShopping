<!DOCTYPE html>
<html>
<head>
<meta charset="ISO-8859-1">
<title>Products</title>
<script src="http://code.jquery.com/jquery-2.0.3.js"> </script>
<script>	  
$(document).ready(function () {
	    $.ajax({
	        type: "GET",
	        url: "/EcommerceApp/REST/products",
	        dataType: "xml",
	        success: function(xml) {
	            $(xml).find('product').each(function(i){
	                var pName = $(this).find('productName').text();
	                var pId = $(this).find('productId').text();
	                var pDesc = $(this).find('productDesc').text();
	                var pCat = $(this).find('productCategory').text();
	                var price = $(this).find('price').text();
	                var weight = $(this).find('weight_lb').text();
	                
	                $('#products').append('<tr> <td> <tr> <td colspan="2" align="center"> <img width="100" height="100" src="images/'+pId+'.jpg"></td></tr>'+
	              									 '<tr> <th>Name :</th> <td>'+pName+'</td> </tr>'+
	              									 '<tr> <th>Category :</th> <td>'+pCat+'</td> </tr>'+
	              			                		 '<tr> <th>Description :</th><td>'+pDesc+'</td></tr>'+
	              			                		 '<tr> <th>Price :</th><td> $'+price+'</td></tr>'+
	              			                		 '<tr> <th>Weight :</th><td>'+weight+' lb</td></tr>'+
	              			                		 '<tr> <td colspan="2" align="center"> <input type="submit" value="Add to Cart" onclick="addCart('+ pId + ',\'' + pName + '\',\''+ pCat +'\','+ price +','+ weight +')"> </td> </tr>'+
	              									 '</td> </tr> <br>');      
	           });
	        }   
	    }); 
	});

function addCart(pId,pName,pCat,price,weight){
	var cart = window.sessionStorage; 	
	cart.setItem('pId',pId);
	cart.setItem('pName',pName);
	cart.setItem('pCat',pCat);
	cart.setItem('price',price);
	cart.setItem('weight',weight);
	window.location.replace("Cart.html");
}
</script>
</head>

<body>
<div id="div1" align="right"><a href="LoginForm.html">Logout</a></div>

<table id="products">

</table>

</body>
</html>
