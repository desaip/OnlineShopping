<!DOCTYPE html>
<html>
<head>
<meta charset="ISO-8859-1">
<title>Products</title>
<script src="http://code.jquery.com/jquery-2.0.3.js"> </script>
<script>	  

$(document).ready(function () {
	    $.ajax({
	        type: "GET",
	        url: "/EcommerceApp/REST/products",
	        dataType: "xml",
	        success: function(xml) {              
                
	            $(xml).find('product').each(function(i){
	                var pName = $(this).find('productName').text();
	                var pId = $(this).find('productId').text();
	                var pDesc = $(this).find('productDesc').text();
	                var pCat = $(this).find('productCategory').text();
	                var price = $(this).find('price').text();
	                var weight = $(this).find('weight_lb').text();
	                var flprice = parseFloat(price);
	                var tax=parseFloat(flprice*0.09);              		            
	               	                		               	                
	                $("#products").append('<tr><td><tr> <td colspan="2" align="center"> <img width="100" height="100" src="images/'+pId+'.jpg"></td></tr>'+
						 '<tr> <th>Name :</th> <td>'+pName+'</td> </tr>'+
						 '<tr> <th>Category :</th> <td>'+pCat+'</td> </tr>'+
                		 '<tr> <th>Description :</th><td>'+pDesc+'</td></tr>'+
                		 '<tr> <th>Price :</th><td> $'+price+'</td></tr>'+
                		 '<tr> <th>Weight :</th><td>'+weight+' lb</td></tr>'+
                		 '<script src="paypal-button-minicart.min.js?merchant=pray90@gmail.com"'+ 
 		                'data-button="cart"'+ 
 		                'data-name="'+pName+'"'+ 
 		                'data-amount="'+flprice+'"'+
 		                'data-currency="USD"'+ 
 		                'data-shipping="1"'+ 
 		                'data-tax="'+tax+'"'+ 
 		                'data-callback="http://localhost:8080/Checkout.html"'+ 
 		                'data-env="sandbox"'+
 		            	'>'+'<'+'/script>'+
                		 '</td></tr>'           
	           );
	            });	       	
	        }   
	    }); 
	});

function addCart(pId,pName,pCat,price,weight){
	var cart = window.sessionStorage;
	cart.setItem('pId',pId);
	cart.setItem('pName',pName);
	cart.setItem('pCat',pCat);
	cart.setItem('price',price);
	cart.setItem('weight',weight);
	window.location.replace("Cart.html");
}
</script>
</head>

<body>
<div id="div" align="center"><a href="Welcome.html">Products Catalog</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<a href="MyProfile.html">My Profile</a>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<a href="Orders.html">My Orders</a>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<a href="LoginForm.html">Logout</a><br>
<h3> Products Catalog  </h3>
</div>
<table>
	<tr>
		<td>
			<table id="products">
			<tr id="productsrow">
			</tr>
			</table>
		</td>
	</tr>
</table>


</body>
</html>
